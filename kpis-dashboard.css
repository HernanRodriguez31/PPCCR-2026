.kpiDash {
  --kpi-blue-900: var(--blue-900, #0b3a66);
  --kpi-blue-700: var(--blue-700, #0f5fa6);
  --kpi-blue-500: var(--blue-600, #1a71c7);
  --kpi-blue-300: var(--blue-400, #7cb8ff);
  --kpi-blue-100: var(--surface-soft, #f4f8fd);

  --kpi-gray-950: var(--text-900, #0f172a);
  --kpi-gray-700: var(--muted, #475569);
  --kpi-gray-600: #5b6f8a;
  --kpi-gray-500: #6f819a;
  --kpi-gray-300: #c7d4e4;
  --kpi-gray-200: #dde7f2;
  --kpi-gray-100: var(--surface-soft, #f4f8fd);

  --kpi-ink: var(--text-900, #0f172a);
  --kpi-muted: var(--muted, #475569);
  --kpi-border: var(--border, rgba(15, 95, 166, 0.16));
  --kpi-border-soft: var(--border-soft, rgba(15, 95, 166, 0.12));
  --kpi-divider: rgba(15, 95, 166, 0.1);
  --kpi-surface: var(--surface-soft, #f4f8fd);
  --kpi-card: var(--surface, #ffffff);
  --kpi-ok: #1f6d4f;
  --kpi-warn: #5f6f84;
  --kpi-critical: var(--blue-700, #0f5fa6);

  --kpi-radius-sm: var(--radius-12, 12px);
  --kpi-radius-md: var(--radius-16, 16px);
  --kpi-radius-lg: var(--radius-tile, 18px);

  --kpi-shadow-card: var(--shadow-sm, 0 6px 18px rgba(19, 41, 75, 0.06));
  --kpi-shadow-soft: var(
    --shadow-sm,
    0 1px 3px rgba(19, 41, 75, 0.06),
    0 8px 22px rgba(19, 41, 75, 0.05)
  );

  --kpi-space-1: var(--space-1, 0.25rem);
  --kpi-space-2: var(--space-2, 0.5rem);
  --kpi-space-3: var(--space-3, 0.75rem);
  --kpi-space-4: var(--space-4, 1rem);
  --kpi-space-5: var(--space-5, 1.25rem);

  --kpi-title-xl: 1.14rem;
  --kpi-title-lg: 1rem;
  --kpi-title-md: 0.85rem;

  --kpi-font-ui: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
    Arial, sans-serif;
  margin-top: 1rem;
  color: var(--kpi-ink);
  font-family: var(--kpi-font-ui);
}

.kpiDash__loading,
.kpiDash__empty {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  background: linear-gradient(145deg, #ffffff 0%, var(--kpi-surface) 100%);
  padding: var(--kpi-space-5);
  box-shadow: var(--kpi-shadow-soft);
}

.kpiDash__loading h3,
.kpiDash__empty h3 {
  margin: 0;
  font-size: var(--kpi-title-xl);
  color: var(--kpi-blue-900);
}

.kpiDash__loading p,
.kpiDash__empty p {
  margin: 0.4rem 0 0;
  color: var(--kpi-muted);
  line-height: 1.45;
}

.kpiDash__shell {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: var(--kpi-space-4);
  align-items: start;
}

.kpiDash__reportHeader {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  background: var(--kpi-card);
  padding: var(--kpi-space-4);
  box-shadow: var(--kpi-shadow-card);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--kpi-space-4);
}

.kpiDash__reportHeadMain h3 {
  margin: 0;
  font-size: 1.08rem;
  font-weight: 650;
  letter-spacing: -0.01em;
  color: var(--kpi-ink);
}

.kpiDash__reportHeadMain p {
  margin: 0.22rem 0 0;
  font-size: 0.79rem;
  color: var(--kpi-muted);
}

.kpiDash__reportHeadMeta {
  display: grid;
  justify-items: end;
  gap: 0.34rem;
}

.kpiDash__reportUpdated {
  margin: 0;
  font-size: 0.73rem;
  color: var(--kpi-gray-600);
  font-variant-numeric: tabular-nums;
}

.kpiDash__reportActions {
  display: inline-flex;
  gap: 0.34rem;
}

.kpiDash__reportBtn {
  appearance: none;
  border: 1px solid var(--kpi-border);
  border-radius: var(--radius-pill, 999px);
  background: var(--surface, #fff);
  color: var(--kpi-ink);
  font: inherit;
  font-size: 0.74rem;
  font-weight: 600;
  line-height: 1;
  padding: 0.38rem 0.7rem;
  cursor: pointer;
  transition: background-color 120ms ease, border-color 120ms ease;
}

.kpiDash__reportBtn:hover:not(:disabled) {
  background: var(--kpi-blue-100);
  border-color: rgba(15, 95, 166, 0.3);
}

.kpiDash__reportBtn:focus-visible {
  outline: var(--focus, 3px solid rgba(42, 137, 230, 0.7));
  outline-offset: 2px;
}

.kpiDash__reportBtn:disabled {
  opacity: 0.56;
  cursor: not-allowed;
}

.kpiDash__reportBtn--primary {
  background: rgba(15, 95, 166, 0.12);
  border-color: rgba(15, 95, 166, 0.26);
}

.kpiDash__reportStatus {
  display: inline-flex;
  align-items: center;
  gap: 0.36rem;
  font-size: 0.72rem;
  font-weight: 600;
  color: var(--kpi-gray-700);
}

.kpiDash__reportStatusDot {
  width: 0.56rem;
  height: 0.56rem;
  border-radius: 999px;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.9);
}

.kpiDash__reportStatusIcon {
  width: 0.86rem;
  height: 0.86rem;
  border-radius: 999px;
  border: 1px solid rgba(145, 161, 181, 0.34);
  color: #6f7f95;
  background: rgba(145, 161, 181, 0.1);
  font-size: 0.62rem;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  text-transform: lowercase;
}

.kpiDash__reportStatus--ok .kpiDash__reportStatusDot {
  background: #28a06e;
}

.kpiDash__reportStatus--warn .kpiDash__reportStatusDot {
  background: #91a1b5;
}

.kpiDash__cards {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: var(--kpi-space-3);
}

.kpiDash__exec {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: var(--kpi-space-4);
  align-items: stretch;
}

.kpiDash__exec > .kpiDash__execPanel {
  height: 100%;
}

.kpiDash__execPanel {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  background: var(--kpi-card);
  padding: var(--kpi-space-4);
  box-shadow: var(--kpi-shadow-card);
}

.kpiDash__execHeader {
  align-items: flex-start;
  margin-bottom: 0.55rem;
}

.kpiDash__execHeader h4 {
  font-size: var(--kpi-title-lg);
  font-weight: 620;
  letter-spacing: 0.01em;
}

.kpiDash__execHeader p {
  font-size: 0.79rem;
  color: var(--kpi-gray-600);
}

.kpiDash__summaryHeadTotal {
  margin-left: auto;
  font-size: clamp(1.9rem, 3vw, 2.45rem);
  line-height: 0.95;
  font-weight: 700;
  color: var(--kpi-blue-900);
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.kpiDash__exec .kpiDash__summaryCard {
  border-color: transparent;
  background: transparent;
  box-shadow: none;
  padding: 0;
}

.kpiDash__exec .kpiDash__fitFlow {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  padding: var(--kpi-space-4);
  background: var(--kpi-card);
  box-shadow: var(--kpi-shadow-card);
}

.kpiDash__exec .kpiDash__fitFlowDonutPanel {
  background: linear-gradient(150deg, #ffffff, rgba(234, 243, 255, 0.44));
}

.kpiDash__summary {
  display: block;
}

.kpiDash__summary .kpiDash__execHeader {
  margin-bottom: 0.34rem;
}

.kpiDash__summaryCard {
  border: 0;
  border-radius: 0;
  background: transparent;
  padding: 0;
  box-shadow: none;
  display: grid;
  gap: var(--kpi-space-3);
}

.kpiDash__summaryTop {
  display: flex;
  justify-content: flex-end;
  align-items: baseline;
  gap: 0.24rem;
}

.kpiDash__summaryLabel {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--kpi-gray-500);
}

.kpiDash__summaryValue {
  font-size: clamp(1.8rem, 3vw, 2.35rem);
  line-height: 1;
  font-weight: 700;
  color: var(--kpi-blue-900);
  text-align: right;
  justify-self: end;
}

.kpiDash__summaryDistribution {
  display: grid;
  gap: var(--kpi-space-2);
  border-top: 1px solid var(--kpi-divider);
  padding-top: var(--kpi-space-3);
}

.kpiDash__summaryBar {
  position: relative;
  display: flex;
  width: 100%;
  height: 10px;
  border-radius: 999px;
  overflow: visible;
  background: var(--kpi-blue-100);
}

.kpiDash__summaryBarSegment {
  position: relative;
  display: block;
  height: 100%;
  cursor: default;
}

.kpiDash__summaryBarSegment:focus-visible {
  outline: 2px solid rgba(42, 137, 230, 0.45);
  outline-offset: 3px;
}

.kpiDash__summaryBarSegment + .kpiDash__summaryBarSegment {
  box-shadow: inset 2px 0 0 rgba(255, 255, 255, 0.95);
}

.kpiDash__summaryBarSegment--fit {
  border-radius: 999px 0 0 999px;
  background: linear-gradient(90deg, var(--kpi-blue-900), #0a62af);
}

.kpiDash__summaryBarSegment--outside {
  border-radius: 0 999px 999px 0;
  background: linear-gradient(90deg, var(--kpi-blue-500), var(--kpi-blue-300));
}

.kpiDash__summaryBarSegment::before,
.kpiDash__summaryBarSegment::after {
  opacity: 0;
  pointer-events: none;
  transition: opacity 120ms ease, transform 120ms ease;
}

.kpiDash__summaryBarSegment::before {
  content: "";
  position: absolute;
  left: 50%;
  bottom: calc(100% + 2px);
  transform: translate(-50%, 3px);
  border-width: 5px;
  border-style: solid;
  border-color: #ffffff transparent transparent transparent;
  filter: drop-shadow(0 1px 0 rgba(19, 41, 75, 0.14));
  z-index: 7;
}

.kpiDash__summaryBarSegment::after {
  content: attr(data-kpi-tooltip);
  position: absolute;
  left: 50%;
  bottom: calc(100% + 10px);
  transform: translate(-50%, 3px);
  white-space: nowrap;
  font-size: 0.68rem;
  line-height: 1.2;
  color: var(--kpi-ink);
  background: #ffffff;
  border: 1px solid var(--kpi-border-soft);
  border-radius: 9px;
  padding: 0.28rem 0.46rem;
  box-shadow: 0 8px 20px rgba(19, 41, 75, 0.14);
  z-index: 8;
}

.kpiDash__summaryBarSegment:hover::before,
.kpiDash__summaryBarSegment:hover::after,
.kpiDash__summaryBarSegment:focus-visible::before,
.kpiDash__summaryBarSegment:focus-visible::after {
  opacity: 1;
  transform: translate(-50%, 0);
}

.kpiDash__summarySplit {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--kpi-space-2);
}

.kpiDash__summaryMainMetric {
  display: grid;
  grid-template-columns: auto auto 3ch 1fr;
  grid-template-areas:
    "dot label value ."
    ". meta meta .";
  column-gap: 0.42rem;
  row-gap: 0.06rem;
  align-items: center;
  padding: 0.18rem 0;
  border: 0;
  border-radius: 0;
  background: transparent;
}

.kpiDash__summaryMainDot {
  grid-area: dot;
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 999px;
  margin-top: 0;
  align-self: center;
}

.kpiDash__summaryMainDot--fit {
  background: var(--kpi-blue-900);
}

.kpiDash__summaryMainDot--outside {
  background: var(--kpi-blue-500);
}

.kpiDash__summaryMainLabel {
  grid-area: label;
  font-size: 0.74rem;
  color: var(--kpi-gray-600);
}

.kpiDash__summaryMainValue {
  grid-area: value;
  font-size: 1.05rem;
  font-weight: 700;
  color: var(--kpi-blue-900);
  font-variant-numeric: tabular-nums;
  width: 3ch;
  text-align: left;
  justify-self: start;
}

.kpiDash__summaryMainMeta {
  grid-area: meta;
  font-size: 0.69rem;
  color: var(--kpi-gray-500);
}

.kpiDash__summaryReasons {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--kpi-space-2);
  border-top: 1px solid var(--kpi-divider);
  padding-top: var(--kpi-space-3);
}

.kpiDash__summaryReasonsScope {
  grid-column: 1 / -1;
  margin: 0;
  font-size: 0.68rem;
  color: var(--kpi-gray-500);
  letter-spacing: 0.01em;
}

.kpiDash__summaryBadge {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-sm);
  background: linear-gradient(150deg, #ffffff, rgba(234, 243, 255, 0.45));
  padding: 0.44rem 0.55rem;
  display: grid;
  gap: 0.14rem;
}

.kpiDash__summaryBadgeLabel {
  font-size: 0.71rem;
  color: var(--kpi-gray-600);
}

.kpiDash__summaryBadgeValue {
  display: inline-flex;
  align-items: baseline;
  gap: 0.18rem;
  font-size: 1rem;
  font-weight: 700;
  color: var(--kpi-blue-900);
  line-height: 1.05;
  font-variant-numeric: tabular-nums;
  text-align: center;
  justify-self: center;
}

.kpiDash__summaryBadgePct {
  font-size: 0.72rem;
  font-weight: 600;
  color: var(--kpi-gray-600);
  letter-spacing: 0.01em;
}

.kpiDash__fitFlow {
  min-width: 0;
}

.kpiDash__fitFlowBody {
  display: grid;
  gap: var(--kpi-space-3);
}

.kpiDash__fitFlowSplit {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--kpi-space-3);
  align-items: stretch;
}

.kpiDash__fitFlowPanel {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-sm);
  background: var(--kpi-card);
  padding: 0.68rem 0.72rem;
  min-width: 0;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.68);
}

.kpiDash__fitFlowPanel .kpiDash__fitOutcome,
.kpiDash__fitFlowPanel .kpiDash__trk {
  border-top: 0;
  padding-top: 0;
}

.kpiDash__fitFlowPanel .kpiDash__fitOutcome {
  gap: var(--kpi-space-2);
}

.kpiDash__fitFlowPanel--outcome {
  display: flex;
}

.kpiDash__fitFlowPanel--trk {
  display: flex;
}

.kpiDash__fitFlowPanel--outcome .kpiDash__fitOutcome {
  flex: 1;
  min-height: 100%;
  display: grid;
  grid-template-rows: auto auto auto;
  align-content: space-between;
  gap: 0.52rem;
}

.kpiDash__fitFlowPanel--trk .kpiDash__trk {
  flex: 1;
  min-height: 100%;
  display: grid;
  grid-template-rows: auto minmax(0, 1fr);
  gap: 0.44rem;
}

.kpiDash__fitFlowPanel .kpiDash__trkHead {
  flex-direction: row;
  align-items: flex-start;
  justify-content: space-between;
  gap: 0.35rem;
}

.kpiDash__fitFlowPanel .kpiDash__trkSub {
  display: none;
}

.kpiDash__fitFlowPanel .kpiDash__trkStatus {
  white-space: nowrap;
}

.kpiDash__fitFlowPanel .kpiDash__trkBody {
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: stretch;
  border: 0;
  background: transparent;
  box-shadow: none;
  padding: 0;
  gap: 0.48rem;
  min-height: 100%;
  height: 100%;
}

.kpiDash__fitFlowPanel .kpiDash__trkKpi {
  min-height: 100%;
  grid-template-rows: auto auto 1fr auto;
  align-content: stretch;
}

.kpiDash__fitFlowPanel .kpiDash__trkGap {
  font-size: 0.63rem;
  min-height: 1.05rem;
  display: inline-flex;
  align-items: center;
  margin: 0.06rem 0;
}

.kpiDash__fitFlowPanel .kpiDash__trkFactLine {
  margin-top: auto;
  align-self: start;
}

.kpiDash__fitFlowPanel .kpiDash__trkGaugeWrap {
  justify-items: end;
  align-items: end;
}

.kpiDash__fitFlowPanel .kpiDash__trkGauge {
  width: 76px;
  height: 76px;
}

.kpiDash__fitFlowPanel .kpiDash__trkGaugeGoal {
  display: none;
}

.kpiDash__fitFlowHint {
  justify-self: end;
  font-size: 0.64rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  color: var(--kpi-gray-500);
}

.kpiDash__fitFlowSteps {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 0.7rem;
}

.kpiDash__fitStep {
  position: relative;
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-sm);
  background: linear-gradient(150deg, #ffffff, rgba(234, 243, 255, 0.55));
  padding: 0.58rem 0.62rem;
  display: grid;
  gap: 0.3rem;
  min-width: 0;
  box-shadow: 0 2px 8px rgba(19, 41, 75, 0.04);
}

.kpiDash__fitStepArrow {
  position: absolute;
  right: -0.56rem;
  top: 50%;
  transform: translateY(-50%);
  color: #8ba0bf;
  font-size: 0.85rem;
  font-weight: 700;
}

.kpiDash__fitStepLabel {
  font-size: 0.69rem;
  color: var(--kpi-gray-600);
  line-height: 1.2;
  min-height: 2.05em;
}

.kpiDash__fitStepRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.3rem;
}

.kpiDash__fitStepValue {
  font-size: 1.18rem;
  font-weight: 700;
  color: var(--kpi-blue-900);
  line-height: 1.1;
  letter-spacing: -0.01em;
  font-variant-numeric: tabular-nums;
}

.kpiDash__fitStepBadge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 3.1em;
  border-radius: 999px;
  border: 1px solid transparent;
  padding: 0.08rem 0.42rem;
  font-size: 0.64rem;
  line-height: 1.1;
  font-weight: 700;
  letter-spacing: 0.01em;
  font-variant-numeric: tabular-nums;
}

.kpiDash__fitStepBadge--base {
  color: #5f7496;
  background: rgba(111, 132, 166, 0.12);
  border-color: rgba(111, 132, 166, 0.22);
}

.kpiDash__fitStepBadge--mid {
  color: #3269a8;
  background: rgba(60, 127, 195, 0.14);
  border-color: rgba(60, 127, 195, 0.24);
}

.kpiDash__fitStepBadge--full {
  color: #0f4f8d;
  background: rgba(30, 111, 191, 0.18);
  border-color: rgba(30, 111, 191, 0.28);
}

.kpiDash__fitStepMeta,
.kpiDash__fitStepDetail {
  font-size: 0.7rem;
  color: var(--kpi-gray-600);
}

.kpiDash__fitOutcome {
  border-top: 1px solid var(--kpi-divider);
  padding-top: var(--kpi-space-3);
  display: grid;
  gap: var(--kpi-space-2);
}

.kpiDash__fitOutcomeHeader {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--kpi-space-2);
}

.kpiDash__fitOutcomeHeader h5 {
  margin: 0;
  font-size: var(--kpi-title-md);
  font-weight: 620;
  color: var(--kpi-blue-900);
}

.kpiDash__fitOutcomeTotal {
  font-size: 1rem;
  line-height: 1;
  font-weight: 700;
  color: var(--kpi-blue-900);
  font-variant-numeric: tabular-nums;
}

.kpiDash__fitOutcomeBar {
  position: relative;
  display: flex;
  width: 100%;
  height: 10px;
  border-radius: 999px;
  overflow: visible;
  background: transparent;
  cursor: default;
  isolation: isolate;
}

.kpiDash__fitOutcomeBarWrap {
  position: relative;
}

.kpiDash__fitOutcomeBar::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: var(--kpi-blue-100);
  z-index: 0;
}

.kpiDash__fitOutcomeSegment {
  display: block;
  position: relative;
  height: 100%;
  z-index: 1;
  cursor: default;
}

.kpiDash__fitOutcomeSegment:focus-visible {
  outline: 2px solid rgba(38, 124, 205, 0.42);
  outline-offset: 3px;
}

.kpiDash__fitOutcomeBar[data-has-split="true"] .kpiDash__fitOutcomeSegment--neg {
  border-radius: 999px 0 0 999px;
}

.kpiDash__fitOutcomeSegment--neg {
  background: linear-gradient(90deg, #1a6ebb, #58a0e3);
}

.kpiDash__fitOutcomeBar[data-has-split="true"] .kpiDash__fitOutcomeSegment--neg::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  right: -1px;
  width: 2px;
  background: rgba(255, 255, 255, 0.88);
  z-index: 2;
}

.kpiDash__fitOutcomeBar[data-has-split="true"] .kpiDash__fitOutcomeSegment--pos {
  border-radius: 0 999px 999px 0;
}

.kpiDash__fitOutcomeBar[data-has-split="false"] .kpiDash__fitOutcomeSegment {
  border-radius: 999px;
}

.kpiDash__fitOutcomeSegment--pos {
  background: linear-gradient(90deg, #88bdf2, #b9dbfb);
}

.kpiDash__fitOutcomeSegmentTip {
  position: absolute;
  left: 50%;
  bottom: calc(100% + 8px);
  transform: translate(-50%, 4px);
  opacity: 0;
  pointer-events: none;
  display: inline-flex;
  white-space: nowrap;
  padding: 0.3rem 0.5rem;
  border: 1px solid var(--kpi-border-soft);
  border-radius: 9px;
  background: #ffffff;
  color: var(--kpi-gray-700);
  font-size: 0.64rem;
  line-height: 1.2;
  font-variant-numeric: tabular-nums;
  box-shadow: 0 10px 26px rgba(19, 41, 75, 0.14);
  transition: opacity 120ms ease, transform 120ms ease;
  z-index: 9;
}

.kpiDash__fitOutcomeSegmentTip::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 100%;
  transform: translateX(-50%);
  border-width: 5px 5px 0;
  border-style: solid;
  border-color: #ffffff transparent transparent;
}

.kpiDash__fitOutcomeSegment:hover .kpiDash__fitOutcomeSegmentTip,
.kpiDash__fitOutcomeSegment:focus-visible .kpiDash__fitOutcomeSegmentTip {
  opacity: 1;
  transform: translate(-50%, 0);
}

.kpiDash__fitOutcomeLegend {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.3rem 0.7rem;
}

.kpiDash__fitOutcomeItem + .kpiDash__fitOutcomeItem {
  position: relative;
  padding-left: 0.64rem;
}

.kpiDash__fitOutcomeItem + .kpiDash__fitOutcomeItem::before {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  width: 1px;
  height: 0.88rem;
  transform: translateY(-50%);
  background: rgba(15, 95, 166, 0.16);
}

.kpiDash__fitOutcomeItem {
  display: grid;
  grid-template-columns: auto 1fr auto;
  grid-template-areas: "dot label metric";
  align-items: center;
  gap: 0.34rem 0.4rem;
  padding: 0.06rem 0;
  border: 0;
  border-radius: 0;
  background: transparent;
}

.kpiDash__fitOutcomeDot {
  grid-area: dot;
  width: 0.45rem;
  height: 0.45rem;
  border-radius: 999px;
}

.kpiDash__fitOutcomeDot--neg {
  background: #2c79c4;
}

.kpiDash__fitOutcomeDot--pos {
  background: #7db6ec;
}

.kpiDash__fitOutcomeLabel {
  grid-area: label;
  font-size: 0.7rem;
  color: var(--kpi-gray-600);
}

.kpiDash__fitOutcomeMetric {
  grid-area: metric;
  display: inline-flex;
  align-items: baseline;
  justify-self: end;
  gap: 0.18rem;
}

.kpiDash__fitOutcomeValue {
  font-size: 0.82rem;
  font-weight: 700;
  color: var(--kpi-blue-900);
  font-variant-numeric: tabular-nums;
  line-height: 1;
}

.kpiDash__fitOutcomePct {
  font-size: 0.67rem;
  line-height: 1.05;
  color: var(--kpi-gray-500);
  font-weight: 400;
  font-variant-numeric: tabular-nums;
}

.kpiDash__fitOutcomeEmpty {
  margin: 0;
  font-size: 0.74rem;
  color: var(--kpi-gray-600);
}

.kpiDash__trk {
  border-top: 1px solid var(--kpi-divider);
  padding-top: var(--kpi-space-2);
  display: grid;
  gap: 0.55rem;
  --trk-accent: var(--kpi-blue-700);
  --trk-chip-bg: rgba(30, 111, 191, 0.12);
  --trk-chip-border: rgba(30, 111, 191, 0.26);
  --trk-chip-text: var(--kpi-blue-900);
  --trk-ring-rest: rgba(136, 189, 242, 0.34);
}

.kpiDash__trkHead {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 0.7rem;
}

.kpiDash__trkMeta {
  display: grid;
  gap: 0.08rem;
}

.kpiDash__trkTitle {
  margin: 0;
  font-size: clamp(0.86rem, 1.2vw, 0.95rem);
  font-weight: 650;
  color: var(--kpi-blue-900);
}

.kpiDash__trkSub {
  margin: 0;
  font-size: 0.61rem;
  color: var(--kpi-gray-500);
  letter-spacing: 0.01em;
}

.kpiDash__trkStatus {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 1.2rem;
  padding: 0.05rem 0.42rem;
  border-radius: 999px;
  border: 1px solid var(--trk-chip-border);
  background: var(--trk-chip-bg);
  color: var(--trk-chip-text);
  font-size: 0.62rem;
  font-weight: 700;
  letter-spacing: 0.01em;
}

.kpiDash__trkGap {
  font-size: 0.67rem;
  line-height: 1.2;
  font-weight: 600;
  color: var(--kpi-gray-600);
  font-variant-numeric: tabular-nums;
}

.kpiDash__trkBody {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-sm);
  background: linear-gradient(150deg, #f4f4f4, rgba(255, 255, 255, 0.94));
  padding: 0.58rem 0.64rem;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 0.55rem;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.7);
}

.kpiDash__trkKpi {
  display: grid;
  gap: 0.14rem;
  min-width: 0;
}

.kpiDash__trkPrimary {
  display: flex;
  align-items: baseline;
  gap: 0.28rem;
}

.kpiDash__trkValue {
  font-size: clamp(0.94rem, 1.45vw, 1.12rem);
  line-height: 0.96;
  font-weight: 700;
  color: var(--kpi-blue-900);
  font-variant-numeric: tabular-nums;
}

.kpiDash__trkTarget {
  font-size: 0.62rem;
  color: var(--kpi-gray-500);
  letter-spacing: 0.01em;
}

.kpiDash__trkFactLine {
  font-size: 0.66rem;
  color: var(--kpi-gray-600);
  font-variant-numeric: tabular-nums;
}

.kpiDash__trkFactLine strong {
  font-size: 0.76rem;
  color: var(--kpi-blue-900);
  font-weight: 700;
}

.kpiDash__trkGaugeWrap {
  display: grid;
  justify-items: end;
}

.kpiDash__trkGauge {
  --trk-pct: 0;
  position: relative;
  width: 92px;
  height: 92px;
  border-radius: 50%;
  background: conic-gradient(
    var(--trk-accent) calc(var(--trk-pct) * 1%),
    var(--trk-ring-rest) 0
  );
  display: grid;
  place-items: center;
  box-shadow: inset 0 0 0 1px rgba(12, 78, 141, 0.08);
  overflow: visible;
}

.kpiDash__trkGaugeOverlay {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.kpiDash__trkGaugeHit {
  fill: none;
  stroke: transparent;
  stroke-width: 16;
  pointer-events: stroke;
  cursor: default;
}

.kpiDash__trkGaugeHit:focus-visible {
  outline: none;
}

.kpiDash__trkGaugeTip {
  position: absolute;
  left: 50%;
  bottom: calc(100% + 8px);
  transform: translate(-50%, 4px);
  opacity: 0;
  pointer-events: none;
  max-width: 180px;
  white-space: normal;
  text-align: center;
  padding: 0.26rem 0.44rem;
  border-radius: 9px;
  border: 1px solid var(--kpi-border-soft);
  background: #ffffff;
  color: var(--kpi-gray-700);
  font-size: 0.62rem;
  line-height: 1.25;
  box-shadow: 0 8px 22px rgba(19, 41, 75, 0.14);
  z-index: 4;
  transition: opacity 120ms ease, transform 120ms ease;
}

.kpiDash__trkGaugeTip::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 100%;
  transform: translateX(-50%);
  border-width: 5px 5px 0;
  border-style: solid;
  border-color: #ffffff transparent transparent;
}

.kpiDash__trkGaugeTip.is-visible {
  opacity: 1;
  transform: translate(-50%, 0);
}

.kpiDash__trkGaugeInner {
  position: relative;
  z-index: 1;
  width: 79%;
  height: 79%;
  border-radius: 50%;
  background: #ffffff;
  border: 1px solid var(--kpi-border-soft);
  display: grid;
  place-items: center;
  align-content: center;
  gap: 0.06rem;
  text-align: center;
}

.kpiDash__trkGaugeValue {
  font-size: 0.74rem;
  line-height: 1;
  font-weight: 700;
  color: var(--kpi-blue-900);
  font-variant-numeric: tabular-nums;
}

.kpiDash__trkGaugeGoal {
  font-size: 0.5rem;
  line-height: 1;
  color: var(--kpi-gray-500);
}

.kpiDash__trk--strong {
  --trk-accent: #0b5fae;
  --trk-chip-bg: rgba(11, 95, 174, 0.14);
  --trk-chip-border: rgba(11, 95, 174, 0.28);
  --trk-chip-text: #0b4f8f;
}

.kpiDash__trk--good {
  --trk-accent: #1e6fbf;
  --trk-chip-bg: rgba(30, 111, 191, 0.12);
  --trk-chip-border: rgba(30, 111, 191, 0.24);
  --trk-chip-text: #0d4e8c;
}

.kpiDash__trk--watch {
  --trk-accent: #3c7fc3;
  --trk-chip-bg: rgba(60, 127, 195, 0.14);
  --trk-chip-border: rgba(60, 127, 195, 0.24);
  --trk-chip-text: #1f5b97;
}

.kpiDash__trk--empty {
  --trk-accent: #9aacbf;
  --trk-chip-bg: rgba(143, 161, 185, 0.16);
  --trk-chip-border: rgba(143, 161, 185, 0.26);
  --trk-chip-text: #5f738d;
  --trk-ring-rest: rgba(143, 161, 185, 0.28);
}

.kpiDash__trk--empty .kpiDash__trkValue,
.kpiDash__trk--empty .kpiDash__trkGaugeValue {
  color: var(--kpi-gray-600);
}

.kpiDash__card {
  background: var(--kpi-card);
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  padding: var(--kpi-space-4);
  min-height: 106px;
  box-shadow: var(--kpi-shadow-card);
}

.kpiDash__cardLabel {
  display: block;
  font-size: 0.76rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  color: var(--kpi-muted);
}

.kpiDash__cardValue {
  display: block;
  margin-top: 0.35rem;
  font-size: clamp(1.35rem, 2.25vw, 1.72rem);
  line-height: 1.1;
  font-weight: 700;
  color: var(--kpi-blue-900);
}

.kpiDash__cardMeta {
  display: block;
  margin-top: 0.25rem;
  font-size: 0.82rem;
  color: var(--kpi-muted);
}

.kpiDash__charts {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: var(--kpi-space-4);
}

.kpiDash__panel--bars,
.kpiDash__panel--aux {
  min-width: 0;
}

.kpiDash__panel {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  background: var(--kpi-card);
  padding: var(--kpi-space-4);
  box-shadow: var(--kpi-shadow-card);
}

.kpiDash__panelHeader {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--kpi-space-3);
  margin-bottom: var(--kpi-space-3);
}

.kpiDash__panelHeader h4 {
  margin: 0;
  font-size: var(--kpi-title-lg);
  font-weight: 620;
  color: var(--kpi-blue-900);
}

.kpiDash__panelHeader p {
  margin: 0;
  font-size: 0.79rem;
  color: var(--kpi-gray-600);
}

.kpiDash__chart {
  width: 100%;
  min-height: 286px;
}

.kpiDash__chartFallback {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 286px;
  border: 1px dashed var(--kpi-border);
  border-radius: 14px;
  text-align: center;
  color: var(--kpi-muted);
  font-size: 0.9rem;
  padding: 0.85rem;
}

.kpiDash__funnel,
.kpiDash__stock {
  border: 1px solid var(--kpi-border-soft);
  border-radius: var(--kpi-radius-md);
  background: var(--kpi-card);
  padding: var(--kpi-space-4);
  box-shadow: var(--kpi-shadow-card);
}

/* Congela la apariencia de estas dos secciones aunque el resto use tokens ejecutivos. */
.kpiDash__funnel[aria-label="Flujo FIT por estación"],
.kpiDash__stock {
  --kpi-blue-900: #004b8f;
  --kpi-blue-700: #1e6fbf;
  --kpi-blue-500: #3c7fc3;
  --kpi-blue-300: #88bdf2;
  --kpi-blue-100: #eaf3ff;
  --kpi-ink: #13294b;
  --kpi-muted: #4c6287;
  --kpi-border: rgba(19, 41, 75, 0.11);
  --kpi-border-soft: rgba(19, 41, 75, 0.08);
  --kpi-divider: rgba(19, 41, 75, 0.09);
  --kpi-surface: #f5f9ff;
  --kpi-card: #ffffff;
  --kpi-shadow-card: 0 6px 18px rgba(19, 41, 75, 0.06);
  --kpi-shadow-soft: 0 1px 3px rgba(19, 41, 75, 0.06),
    0 8px 22px rgba(19, 41, 75, 0.05);
  --kpi-radius-sm: 12px;
  --kpi-radius-md: 16px;
  --kpi-radius-lg: 20px;
}

.kpiDash__tableWrap {
  overflow-x: auto;
  max-width: 100%;
  -webkit-overflow-scrolling: touch;
}

.kpiDash__table {
  width: 100%;
  min-width: 760px;
  border-collapse: collapse;
  font-size: 0.84rem;
}

.kpiDash__table--avance {
  min-width: 620px;
}

.kpiDash__table--avance thead th {
  position: sticky;
  top: 0;
  z-index: 4;
  background: #f8fbff;
  box-shadow: inset 0 -1px 0 var(--kpi-border-soft);
}

.kpiDash__table thead th {
  text-align: left;
  padding: 0.65rem 0.55rem;
  font-size: 0.73rem;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--kpi-muted);
  border-bottom: 1px solid var(--kpi-border);
  vertical-align: middle;
}

.kpiDash__table--flow thead th {
  white-space: nowrap;
  padding-top: 0.76rem;
  padding-bottom: 0.76rem;
  vertical-align: top;
  height: 3.25rem;
}

.kpiDash__thMeta {
  display: block;
  margin-top: 0.16rem;
  font-size: 0.62rem;
  font-weight: 400;
  line-height: 1.15;
  letter-spacing: 0.01em;
  text-transform: none;
  white-space: normal;
  color: #7c8dad;
}

.kpiDash__thLegend {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.18rem;
  white-space: nowrap;
  width: 100%;
}

.kpiDash__thLegendText {
  color: #7c8dad;
}

.kpiDash__thPill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.15rem;
  height: 0.86rem;
  padding: 0 0.28rem;
  border-radius: 999px;
  font-size: 0.58rem;
  font-weight: 700;
  line-height: 1;
}

.kpiDash__thPill--neg {
  color: #2f7a52;
  background: rgba(47, 122, 82, 0.13);
  border: 1px solid rgba(47, 122, 82, 0.3);
}

.kpiDash__thPill--pos {
  color: #ac4a80;
  background: rgba(172, 74, 128, 0.12);
  border: 1px solid rgba(172, 74, 128, 0.25);
}

.kpiDash__table--flow thead th:nth-child(2),
.kpiDash__table--flow thead th:nth-child(3),
.kpiDash__table--flow tbody td:nth-child(2),
.kpiDash__table--flow tbody td:nth-child(3),
.kpiDash__table--flow thead th:nth-child(4),
.kpiDash__table--flow tbody td:nth-child(4),
.kpiDash__table--flow thead th:nth-child(5),
.kpiDash__table--flow tbody td:nth-child(5),
.kpiDash__table--flow thead th:nth-child(6),
.kpiDash__table--flow tbody td:nth-child(6) {
  text-align: center;
}

.kpiDash__table--flow tbody td:nth-child(2),
.kpiDash__table--flow tbody td:nth-child(3),
.kpiDash__table--flow tbody td:nth-child(4),
.kpiDash__table--flow tbody td:nth-child(5),
.kpiDash__table--flow tbody td:nth-child(6) {
  font-size: 0.84rem;
  font-weight: 500;
  font-variant-numeric: tabular-nums;
}

.kpiDash__table--avance thead th:first-child,
.kpiDash__table--avance tbody td:first-child {
  position: sticky;
  left: 0;
  z-index: 3;
  background: #ffffff;
}

.kpiDash__table--avance thead th:first-child {
  z-index: 6;
  background: #f8fbff;
}

.kpiDash__table--avance tbody tr.kpiDash__rowTotal td {
  background: rgba(234, 243, 255, 0.95);
  font-weight: 700;
}

.kpiDash__table--avance tbody tr.kpiDash__rowTotal td:first-child {
  z-index: 3;
}

.kpiDash__table--avance tbody td {
  padding: 0.42rem 0.55rem;
}

.kpiDash__table--avance thead th:not(:first-child),
.kpiDash__table--avance tbody td:not(:first-child) {
  text-align: right;
}

.kpiDash__table--avance tbody td:not(:first-child) {
  font-variant-numeric: tabular-nums;
}

.kpiDash__table tbody td {
  padding: 0.6rem 0.55rem;
  border-bottom: 1px solid var(--kpi-blue-100);
  vertical-align: top;
}

.kpiDash__table tbody tr.kpiDash__rowTotal td {
  background: var(--kpi-blue-100);
  font-weight: 600;
}

.kpiDash__table tbody tr:last-child td {
  border-bottom: 0;
}

.kpiDash__station {
  color: var(--kpi-blue-900);
  font-weight: 600;
}

.kpiDash__stage {
  display: grid;
  gap: 0.25rem;
}

.kpiDash__stageValue {
  color: var(--kpi-ink);
  font-weight: 600;
}

.kpiDash__table--avance .kpiDash__stage {
  gap: 0.18rem;
  align-items: flex-end;
}

.kpiDash__table--avance .kpiDash__stageValue {
  font-weight: 500;
  font-variant-numeric: tabular-nums;
  line-height: 1.05;
  text-align: right;
}

.kpiDash__stageMeta {
  font-size: 0.62rem;
  color: #7084a7;
  line-height: 1.1;
}

.kpiDash__table--avance .kpiDash__progress {
  height: 4px;
  width: 100%;
  background: rgba(136, 189, 242, 0.26);
}

.kpiDash__table--avance .kpiDash__progress span {
  background: linear-gradient(
    90deg,
    rgba(30, 111, 191, 0.78),
    rgba(136, 189, 242, 0.82)
  );
}

.kpiDash__progress {
  position: relative;
  height: 7px;
  border-radius: 999px;
  overflow: hidden;
  background: var(--kpi-blue-100);
}

.kpiDash__progress span {
  display: block;
  height: 100%;
  border-radius: inherit;
  background: linear-gradient(
    90deg,
    rgba(30, 111, 191, 0.78),
    rgba(136, 189, 242, 0.92)
  );
}

.kpiDash__flowCell {
  display: inline-grid;
  grid-template-columns: 3ch 3.9em;
  align-items: center;
  column-gap: 0.14rem;
  white-space: nowrap;
}

.kpiDash__flowPrimary {
  color: var(--kpi-ink);
  font-weight: 500;
  line-height: 1.12;
  width: 3ch;
  text-align: left;
  font-variant-numeric: tabular-nums;
}

.kpiDash__flowPct {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 3.9em;
  border-radius: 999px;
  padding: 0.08rem 0.4rem;
  font-size: 0.67rem;
  line-height: 1.1;
  font-weight: 700;
  color: #ac4a80;
  background: rgba(172, 74, 128, 0.12);
  border: 1px solid rgba(172, 74, 128, 0.25);
  font-variant-numeric: tabular-nums;
}

.kpiDash__flowPct--full {
  color: #2f7a52;
  background: rgba(47, 122, 82, 0.13);
  border-color: rgba(47, 122, 82, 0.3);
}

.kpiDash__informCell {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.24rem;
  white-space: nowrap;
}

.kpiDash__informTotal {
  color: var(--kpi-ink);
  font-weight: 500;
  font-variant-numeric: tabular-nums;
}

.kpiDash__informSplit {
  display: inline-flex;
  align-items: center;
  gap: 0.14rem;
}

.kpiDash__informPill {
  min-width: 1.35rem;
  height: 0.9rem;
  padding: 0 0.34rem;
  font-size: 0.62rem;
  font-weight: 500;
}

.kpiDash__informSep {
  color: #8ea0be;
  font-size: 0.67rem;
  line-height: 1;
}

.kpiDash__table--flow tbody tr.kpiDash__rowTotal td:nth-child(2),
.kpiDash__table--flow tbody tr.kpiDash__rowTotal td:nth-child(3),
.kpiDash__table--flow tbody tr.kpiDash__rowTotal td:nth-child(4),
.kpiDash__table--flow tbody tr.kpiDash__rowTotal td:nth-child(5),
.kpiDash__table--flow tbody tr.kpiDash__rowTotal td:nth-child(6),
.kpiDash__table--flow tbody tr.kpiDash__rowTotal .kpiDash__flowPrimary,
.kpiDash__table--flow tbody tr.kpiDash__rowTotal .kpiDash__informTotal,
.kpiDash__table--flow tbody tr.kpiDash__rowTotal .kpiDash__informPill {
  font-weight: 700;
}

.kpiDash__stockGrid {
  margin: 0;
  padding: 0;
  list-style: none;
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 0.7rem;
}

.kpiDash__stockItem {
  border: 1px solid var(--kpi-border);
  border-radius: 14px;
  background: linear-gradient(150deg, #ffffff, var(--kpi-surface));
  padding: 0.74rem;
  min-width: 0;
}

.kpiDash__stockItem--total {
  background: linear-gradient(150deg, var(--kpi-blue-900), var(--kpi-blue-700));
  border-color: rgba(0, 75, 143, 0.2);
}

.kpiDash__stockItem--total .kpiDash__stockStation,
.kpiDash__stockItem--total .kpiDash__stockValue,
.kpiDash__stockItem--total .kpiDash__stockMeta {
  color: #f5f9ff;
}

.kpiDash__stockTop {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.5rem;
}

.kpiDash__stockStation {
  margin: 0;
  font-weight: 600;
  color: var(--kpi-blue-900);
}

.kpiDash__stockValue {
  margin: 0.22rem 0 0;
  font-size: 1.03rem;
  font-weight: 700;
  color: var(--kpi-ink);
}

.kpiDash__stockMeta {
  margin: 0.2rem 0 0;
  color: var(--kpi-muted);
  font-size: 0.79rem;
}

.kpiDash__badge {
  font-size: 0.7rem;
  letter-spacing: 0.02em;
  border-radius: 999px;
  padding: 0.2rem 0.52rem;
  border: 1px solid transparent;
  white-space: nowrap;
}

.kpiDash__badge--ok {
  color: var(--kpi-ok);
  background: rgba(30, 111, 191, 0.1);
  border-color: rgba(30, 111, 191, 0.24);
}

.kpiDash__badge--warn {
  color: var(--kpi-warn);
  background: rgba(60, 127, 195, 0.12);
  border-color: rgba(60, 127, 195, 0.25);
}

.kpiDash__badge--critical {
  color: var(--kpi-critical);
  background: rgba(136, 189, 242, 0.3);
  border-color: rgba(0, 75, 143, 0.25);
}

@media (min-width: 1121px) {
  .kpiDash__shell {
    grid-template-columns: repeat(12, minmax(0, 1fr));
  }

  .kpiDash__reportHeader,
  .kpiDash__exec,
  .kpiDash__charts,
  .kpiDash__funnel--avance,
  .kpiDash__funnel[aria-label="Flujo FIT por estación"],
  .kpiDash__stock {
    grid-column: 1 / -1;
  }

  .kpiDash__exec {
    grid-template-columns: repeat(12, minmax(0, 1fr));
  }

  .kpiDash__exec > .kpiDash__summary {
    grid-column: span 6;
  }

  .kpiDash__exec > .kpiDash__fitFlow {
    grid-column: span 6;
  }

  .kpiDash__charts {
    grid-template-columns: repeat(12, minmax(0, 1fr));
  }

  .kpiDash__panel--bars {
    grid-column: span 6;
    padding-inline: 0.82rem;
  }

  .kpiDash__panel--aux {
    grid-column: span 6;
    padding-inline: 0.96rem;
  }

  .kpiDash__panel--aux .kpiDash__chart,
  .kpiDash__panel--aux .kpiDash__chartFallback {
    min-height: 304px;
  }
}

@media (max-width: 1120px) {
  .kpiDash__cards {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .kpiDash__exec {
    grid-template-columns: 1fr;
  }

  .kpiDash__reportHeader {
    flex-direction: column;
    align-items: flex-start;
  }

  .kpiDash__reportHeadMeta {
    width: 100%;
    justify-items: start;
  }

  .kpiDash__summaryReasons {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitFlowBody {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitFlowSteps {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .kpiDash__fitFlowSplit {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .kpiDash__fitStepArrow {
    display: none;
  }

  .kpiDash__fitFlowHint {
    justify-self: start;
  }

  .kpiDash__fitOutcomeLegend {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitOutcomeItem + .kpiDash__fitOutcomeItem {
    padding-left: 0;
  }

  .kpiDash__fitOutcomeItem + .kpiDash__fitOutcomeItem::before {
    display: none;
  }

  .kpiDash__trkBody {
    grid-template-columns: minmax(0, 1fr) auto;
    align-items: stretch;
    gap: 0.5rem;
  }

  .kpiDash__trkGaugeWrap {
    justify-items: end;
  }

  .kpiDash__trkGauge {
    width: 84px;
    height: 84px;
  }

  .kpiDash__charts {
    grid-template-columns: 1fr;
  }

  .kpiDash__stockGrid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 620px) {
  .kpiDash__cards {
    grid-template-columns: 1fr;
  }

  .kpiDash__panel,
  .kpiDash__execPanel,
  .kpiDash__fitFlow,
  .kpiDash__funnel,
  .kpiDash__stock,
  .kpiDash__reportHeader {
    padding: 0.82rem;
  }

  .kpiDash__summaryCard {
    padding: 0;
  }

  .kpiDash__summaryTop {
    justify-content: flex-end;
    align-items: baseline;
  }

  .kpiDash__summarySplit,
  .kpiDash__summaryReasons {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitFlowSteps {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitFlowSplit {
    grid-template-columns: 1fr;
  }

  .kpiDash__fitStepLabel {
    min-height: 0;
  }

  .kpiDash__fitStepRow {
    gap: 0.42rem;
  }

  .kpiDash__fitOutcomeMetric {
    gap: 0.14rem;
  }

  .kpiDash__fitOutcomeSegmentTip {
    max-width: min(220px, calc(100vw - 2rem));
    white-space: normal;
  }

  .kpiDash__trkGaugeTip {
    max-width: min(180px, calc(100vw - 2rem));
  }

  .kpiDash__trkBody {
    padding: 0.7rem;
  }

  .kpiDash__trkFactLine {
    font-size: 0.64rem;
  }

  .kpiDash__reportHeadMain h3 {
    font-size: 1rem;
  }

  .kpiDash__reportActions {
    width: 100%;
  }

  .kpiDash__reportBtn {
    flex: 1;
  }

  .kpiDash__chart,
  .kpiDash__chartFallback {
    min-height: 250px;
  }

  .kpiDash__stockGrid {
    grid-template-columns: 1fr;
  }
}
